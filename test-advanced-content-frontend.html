<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Content Generation Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .loading {
            text-align: center;
            padding: 20px;
        }
        .result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .platforms {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        .platform-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
    </style>
</head>
<body>
    <h1>üöÄ Advanced Content Generation Test</h1>
    <p>Test the new Advanced Content Generation API with Google Gemini</p>

    <div class="container">
        <!-- Input Form -->
        <div class="card">
            <h2>Content Configuration</h2>
            <form id="contentForm">
                <div class="form-group">
                    <label for="contentType">Content Type *</label>
                    <select id="contentType" required>
                        <option value="video script">Video Script</option>
                        <option value="blog post">Blog Post</option>
                        <option value="social media post">Social Media Post</option>
                        <option value="email">Email</option>
                        <option value="product description">Product Description</option>
                        <option value="advertisement">Advertisement</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="topic">Topic *</label>
                    <textarea id="topic" placeholder="Describe your content topic in detail..." required></textarea>
                </div>

                <div class="form-group">
                    <label for="targetAudience">Target Audience *</label>
                    <input type="text" id="targetAudience" placeholder="e.g., tech enthusiasts, content creators" required>
                </div>

                <div class="form-group">
                    <label for="tone">Tone</label>
                    <select id="tone">
                        <option value="engaging">Engaging</option>
                        <option value="professional">Professional</option>
                        <option value="casual">Casual</option>
                        <option value="humorous">Humorous</option>
                        <option value="educational">Educational</option>
                        <option value="persuasive">Persuasive</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="length">Length</label>
                    <select id="length">
                        <option value="short">Short</option>
                        <option value="medium" selected>Medium</option>
                        <option value="long">Long</option>
                        <option value="very long">Very Long</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Platforms</label>
                    <div class="platforms">
                        <div class="platform-item">
                            <input type="checkbox" id="youtube" value="YouTube">
                            <label for="youtube">YouTube</label>
                        </div>
                        <div class="platform-item">
                            <input type="checkbox" id="linkedin" value="LinkedIn">
                            <label for="linkedin">LinkedIn</label>
                        </div>
                        <div class="platform-item">
                            <input type="checkbox" id="instagram" value="Instagram">
                            <label for="instagram">Instagram</label>
                        </div>
                        <div class="platform-item">
                            <input type="checkbox" id="tiktok" value="TikTok">
                            <label for="tiktok">TikTok</label>
                        </div>
                        <div class="platform-item">
                            <input type="checkbox" id="twitter" value="Twitter">
                            <label for="twitter">Twitter</label>
                        </div>
                        <div class="platform-item">
                            <input type="checkbox" id="facebook" value="Facebook">
                            <label for="facebook">Facebook</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="brandVoice">Brand Voice (Optional)</label>
                    <textarea id="brandVoice" placeholder="Describe your brand's unique voice and style..."></textarea>
                </div>

                <button type="submit" id="generateBtn">
                    ‚ú® Generate Content
                </button>
            </form>
        </div>

        <!-- Results Panel -->
        <div class="card">
            <h2>Generated Content</h2>
            <div id="results">
                <p style="text-align: center; color: #666; padding: 40px;">
                    Configure your content parameters and click "Generate Content" to get started
                </p>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('contentForm');
        const generateBtn = document.getElementById('generateBtn');
        const results = document.getElementById('results');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // Get form data
            const formData = new FormData(form);
            const platforms = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                .map(cb => cb.value);
            
            const payload = {
                contentType: document.getElementById('contentType').value,
                topic: document.getElementById('topic').value,
                targetAudience: document.getElementById('targetAudience').value,
                tone: document.getElementById('tone').value,
                length: document.getElementById('length').value,
                platforms: platforms,
                brandVoice: document.getElementById('brandVoice').value
            };

            // Validate required fields
            if (!payload.contentType || !payload.topic || !payload.targetAudience) {
                results.innerHTML = '<div class="error">Please fill in all required fields: Content Type, Topic, and Target Audience</div>';
                return;
            }

            // Show loading state
            generateBtn.disabled = true;
            generateBtn.textContent = 'üîÑ Generating...';
            results.innerHTML = '<div class="loading">ü§ñ Generating content with AI...<br>This may take a few seconds.</div>';

            try {
                const response = await fetch('/api/content/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();

                if (data.success && data.content) {
                    results.innerHTML = `
                        <div class="success">‚úÖ Content generated successfully!</div>
                        <div class="result">${data.content}</div>
                        <button onclick="copyToClipboard()" style="margin-top: 10px; width: auto; padding: 5px 15px;">
                            üìã Copy to Clipboard
                        </button>
                    `;
                    
                    // Store content for copying
                    window.generatedContent = data.content;
                } else {
                    results.innerHTML = `<div class="error">‚ùå Generation failed: ${data.message || 'Unknown error'}</div>`;
                }
            } catch (error) {
                results.innerHTML = `<div class="error">‚ùå Request failed: ${error.message}</div>`;
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = '‚ú® Generate Content';
            }
        });

        function copyToClipboard() {
            if (window.generatedContent) {
                navigator.clipboard.writeText(window.generatedContent).then(() => {
                    alert('‚úÖ Content copied to clipboard!');
                }).catch(() => {
                    alert('‚ùå Failed to copy to clipboard');
                });
            }
        }

        // Auto-fill example data for quick testing
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('topic').value = 'How to create engaging social media content that drives real results';
            document.getElementById('targetAudience').value = 'small business owners and marketers';
            document.getElementById('youtube').checked = true;
            document.getElementById('linkedin').checked = true;
        });
    </script>
</body>
</html>