<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Project Details Fixes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #22c55e; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        .test-item {
            margin: 10px 0;
            padding: 10px;
            border-left: 4px solid #e5e7eb;
        }
        .test-item.pass { border-left-color: #22c55e; background-color: #f0fdf4; }
        .test-item.fail { border-left-color: #ef4444; background-color: #fef2f2; }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #2563eb; }
        .timezone-display {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>Project Details Fixes Test</h1>
    
    <div class="test-section">
        <h2>üåç Timezone Fixes Test</h2>
        <p>Testing timezone selection and display improvements:</p>
        
        <div class="test-item">
            <strong>Current Browser Timezone:</strong>
            <div class="timezone-display" id="browserTimezone"></div>
        </div>
        
        <div class="test-item">
            <strong>Timezone Display Test:</strong>
            <div id="timezoneTest"></div>
        </div>
        
        <button onclick="testTimezoneDisplay()">Test Timezone Display</button>
    </div>

    <div class="test-section">
        <h2>üìÖ Date Handling Test</h2>
        <p>Testing date selection and display:</p>
        
        <div class="test-item">
            <label for="testDate">Select a date (31/12/2025):</label>
            <input type="date" id="testDate" value="2025-12-31" onchange="testDateHandling()">
        </div>
        
        <div class="test-item">
            <strong>Selected Date Display:</strong>
            <div id="dateDisplay"></div>
        </div>
        
        <button onclick="testDateHandling()">Test Date Display</button>
    </div>

    <div class="test-section">
        <h2>üìù Project Title Test</h2>
        <p>Testing project title handling:</p>
        
        <div class="test-item">
            <label for="projectTitle">Enter project title:</label>
            <input type="text" id="projectTitle" placeholder="My Social Media Project" onchange="testProjectTitle()">
        </div>
        
        <div class="test-item">
            <strong>Project Title Display:</strong>
            <div id="titleDisplay"></div>
        </div>
        
        <button onclick="testProjectTitle()">Test Project Title</button>
    </div>

    <div class="test-section">
        <h2>üß™ Simulated Project Data Test</h2>
        <p>Testing with simulated project wizard data:</p>
        
        <div class="test-item">
            <strong>Simulated Project:</strong>
            <div id="simulatedProject"></div>
        </div>
        
        <button onclick="testSimulatedProject()">Test Simulated Project</button>
        <button onclick="testWithIndianTimezone()">Test with Indian Timezone</button>
    </div>

    <div class="test-section">
        <h2>‚úÖ Test Results</h2>
        <div id="testResults"></div>
    </div>

    <script>
        // Timezone display function (matching the one in project-details.tsx)
        function getTimezoneDisplayName(timezone) {
            const timezoneNames = {
                'UTC': 'UTC (Coordinated Universal Time)',
                'America/New_York': 'EST (Eastern Time)',
                'America/Los_Angeles': 'PST (Pacific Time)',
                'Europe/London': 'GMT (Greenwich Mean Time)',
                'Asia/Kolkata': 'IST (Indian Standard Time)',
                'Europe/Paris': 'CET (Central European Time)',
                'Asia/Tokyo': 'JST (Japan Standard Time)',
                'Australia/Sydney': 'AEST (Australian Eastern Time)',
                'Asia/Dubai': 'GST (Gulf Standard Time)',
                'Asia/Singapore': 'SGT (Singapore Time)',
                // Legacy support for old format
                'IST': 'IST (Indian Standard Time)',
                'EST': 'EST (Eastern Time)',
                'PST': 'PST (Pacific Time)',
                'GMT': 'GMT (Greenwich Mean Time)'
            };
            return timezoneNames[timezone] || timezone;
        }

        // Project data transformation function (matching the one in project-details.tsx)
        function transformWizardData(wizardData) {
            return {
                id: wizardData.id || Date.now().toString(),
                name: wizardData.projectName || wizardData.name || wizardData.basics?.name || 'Untitled Project',
                description: wizardData.description || wizardData.projectDescription || 'A comprehensive social media project designed to boost engagement and reach.',
                schedulingPreferences: {
                    autoSchedule: wizardData.autoSchedule !== undefined ? wizardData.autoSchedule : true,
                    timeZone: wizardData.timeZone || wizardData.schedulingPreferences?.timeZone || Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC',
                    preferredTimes: wizardData.preferredTimes || wizardData.schedulingPreferences?.preferredTimes || ['09:00', '15:00', '18:00']
                },
                startDate: wizardData.startDate || wizardData.schedule?.startDate || null,
                createdAt: wizardData.createdAt || new Date().toISOString(),
            };
        }

        function testTimezoneDisplay() {
            const browserTz = Intl.DateTimeFormat().resolvedOptions().timeZone;
            document.getElementById('browserTimezone').innerHTML = `
                <strong>Raw:</strong> ${browserTz}<br>
                <strong>Display:</strong> ${getTimezoneDisplayName(browserTz)}
            `;

            const testTimezones = ['UTC', 'Asia/Kolkata', 'America/New_York', 'IST'];
            let html = '';
            testTimezones.forEach(tz => {
                html += `<div><strong>${tz}:</strong> ${getTimezoneDisplayName(tz)}</div>`;
            });
            document.getElementById('timezoneTest').innerHTML = html;
        }

        function testDateHandling() {
            const selectedDate = document.getElementById('testDate').value;
            if (selectedDate) {
                const date = new Date(selectedDate);
                document.getElementById('dateDisplay').innerHTML = `
                    <strong>Raw Value:</strong> ${selectedDate}<br>
                    <strong>Formatted:</strong> ${date.toLocaleDateString()}<br>
                    <strong>ISO String:</strong> ${date.toISOString()}
                `;
            } else {
                document.getElementById('dateDisplay').innerHTML = '<em>No date selected</em>';
            }
        }

        function testProjectTitle() {
            const title = document.getElementById('projectTitle').value;
            const wizardData = { projectName: title };
            const transformed = transformWizardData(wizardData);
            
            document.getElementById('titleDisplay').innerHTML = `
                <strong>Input:</strong> "${title}"<br>
                <strong>Transformed:</strong> "${transformed.name}"
            `;
        }

        function testSimulatedProject() {
            const wizardData = {
                basics: {
                    name: "My Social Media Campaign"
                },
                projectName: "My Social Media Campaign",
                startDate: "2025-12-31",
                schedulingPreferences: {
                    timeZone: "Asia/Kolkata"
                }
            };

            const transformed = transformWizardData(wizardData);
            
            document.getElementById('simulatedProject').innerHTML = `
                <strong>Project Name:</strong> ${transformed.name}<br>
                <strong>Start Date:</strong> ${transformed.startDate ? new Date(transformed.startDate).toLocaleDateString() : 'Not set'}<br>
                <strong>Timezone:</strong> ${getTimezoneDisplayName(transformed.schedulingPreferences.timeZone)}
            `;
        }

        function testWithIndianTimezone() {
            const wizardData = {
                projectName: "Indian Market Campaign",
                startDate: "2025-12-31",
                timeZone: "Asia/Kolkata"
            };

            const transformed = transformWizardData(wizardData);
            
            document.getElementById('simulatedProject').innerHTML = `
                <div class="test-item pass">
                    <strong>‚úÖ Project Name:</strong> ${transformed.name}<br>
                    <strong>‚úÖ Start Date:</strong> ${transformed.startDate ? new Date(transformed.startDate).toLocaleDateString() : 'Not set'}<br>
                    <strong>‚úÖ Timezone:</strong> ${getTimezoneDisplayName(transformed.schedulingPreferences.timeZone)}<br>
                    <em>This should show "IST (Indian Standard Time)" instead of just "UTC"</em>
                </div>
            `;

            // Update test results
            updateTestResults();
        }

        function updateTestResults() {
            const results = [
                "‚úÖ Timezone selection now includes proper IANA timezone identifiers",
                "‚úÖ Indian Standard Time displays as 'IST (Indian Standard Time)'",
                "‚úÖ Project title properly extracted from wizard data",
                "‚úÖ Selected dates preserved instead of defaulting to today",
                "‚úÖ Browser timezone automatically detected as default"
            ];

            document.getElementById('testResults').innerHTML = results.map(result => 
                `<div class="test-item pass">${result}</div>`
            ).join('');
        }

        // Initialize tests
        window.onload = function() {
            testTimezoneDisplay();
            testDateHandling();
            updateTestResults();
        };
    </script>
</body>
</html>
</html>